(this["webpackJsonpbranch-routing"]=this["webpackJsonpbranch-routing"]||[]).push([[0],{163:function(n,t,i){"use strict";i.r(t);var a=i(0),o=i.n(a),c=i(118),l=i(25),r=i(6),d=i(55),s=i(34),f=i(229),h=i(226),u=i(224),g=i(230),m=i(222),p=i(225);function b(n){var e={type:"success",content:n};window.AmeyoClient.init().interface.trigger("toastNotification",e)}function v(n){var e={type:"error",content:n};window.AmeyoClient.init().interface.trigger("toastNotification",e)}var j,x,O,y,w,C=function(n,e,t,i,a,o){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return"calc(  min( max(calc( ".concat(i,"px + (").concat(o," - ").concat(i,") * (( ").concat(c||"100vw"," - ").concat(t,"px) / (").concat(a," - ").concat(t,")) ) , ").concat(n,"px), ").concat(e,"px  ) );")},A="branch-routing-conf",N={primary:"rgb(59,153,213)",secondary:"rgb(248, 248, 248)",neutral:"rgb(230,238,244)",highlight1:"#EE6C4D",highlight2:"rgb(57, 172, 69)"},I=function(){return new Promise((function(n,e){var t=window.AmeyoClient.init(),i={customKey:A};t.appConf.get(i).then((function(e){var t,i=null;(null===e||void 0===e?void 0:e.totalRecordsCount)>0&&(i=(null===e||void 0===e||null===(t=e.records)||void 0===t?void 0:t[0])||null);n(i)})).catch(e)}))},S=function(n,e){return new Promise((function(t,i){var a=window.AmeyoClient.init(),o={id:n,data:e};a.appConf.update(o).then((function(){t()})).catch((function(n){console.log("Failed in updateRecord",n),i(n)}))}))},E=function(n){return new Promise((function(t,i){I().then((function(a){try{var o=(null===a||void 0===a?void 0:a.data)||"[]",c=JSON.parse(o);c.map((function(e){e.id==n.id&&(true(!1),v("Error!!! Record with ID: ".concat(n.id," already exists")),i())})),c.push(n);var l=JSON.stringify(c),r=(null===a||void 0===a?void 0:a.id)||-1;r>=0?S(r,l).then((function(){t()})).catch((function(n){i(n)})):(d=l,new Promise((function(n,e){var t=window.AmeyoClient.init(),i={customKey:A,data:d};t.appConf.create(i).then((function(){n()})).catch((function(n){console.log("Failed in createRecord",n),e(n)}))}))).then((function(){t()})).catch((function(n){i(n)}))}catch(e){i(e)}var d})).catch((function(n){console.log("FAILED TO GET APP CONF DATA, before save",n)}))}))},P=i(1),D=function(n){var t=n.campaigns,i=n.refresh,c=Object(a.useState)([]),l=Object(r.a)(c,2),d=l[0],s=l[1],j=o.a.useState(""),x=Object(r.a)(j,2),O=x[0],y=x[1],w=o.a.useState(""),C=Object(r.a)(w,2),A=C[0],N=C[1],I=o.a.useState(""),S=Object(r.a)(I,2),D=S[0],R=S[1],k=function(n,t){var i,a,o,c,l,r;switch(n){case"campaign":y(null===t||void 0===t||null===(i=t.target)||void 0===i?void 0:i.value),(r=null===t||void 0===t||null===(a=t.target)||void 0===a||null===(o=a.value)||void 0===o?void 0:o.campaignId,new Promise((function(n,t){var i=window.AmeyoClient.init(),a={url:"ameyorestapi/voice/getAllCampaignDefaultFeatureContextForCampaign?campaignId=".concat(r),headers:{"content-type":"application/json"},method:"GET"};i.httpRequest.invokeAmeyo(a).then((function(i){try{var a=JSON.parse(null===i||void 0===i?void 0:i.response).map((function(n){return{name:n.contextName,id:n.contextId}}));n(a)}catch(e){console.log("FAILED TO Parse CAMPAIGN LIST RESULT"),console.log(e),t(e)}})).catch((function(n){console.log("FAILED TO GET NODEFLOW LIST FOR CAMPAIGN ".concat(r)),console.log(n),t(n)}))}))).then((function(n){s(n)})).catch((function(n){v("Error occured while getting Nodeflows for selected campaign!!!")}));break;case"branchCode":N(null===t||void 0===t||null===(c=t.target)||void 0===c?void 0:c.value);break;case"nodeflow":R(null===t||void 0===t||null===(l=t.target)||void 0===l?void 0:l.value)}};Object(a.useEffect)((function(){s([])}),[t]);return Object(P.jsxs)(T,{children:[Object(P.jsx)("div",{className:"module-name",children:Object(P.jsx)("h6",{children:"Branch Routing Module"})}),Object(P.jsxs)("div",{className:"form",children:[Object(P.jsxs)("div",{className:"form-fields",children:[Object(P.jsx)(g.a,{variant:"standard",sx:{m:1,minWidth:200},children:Object(P.jsx)(p.a,{id:"field-branch-code",label:"Branch Code",variant:"standard",value:A,onChange:function(n){return k("branchCode",n)}})}),Object(P.jsxs)(g.a,{variant:"standard",sx:{m:1,minWidth:200},children:[Object(P.jsx)(h.a,{id:"field-campaign-label",children:"Campaign"}),Object(P.jsxs)(m.a,{labelId:"field-campaign-label",id:"field-campaign",value:O,onChange:function(n){return k("campaign",n)},label:"Campaign",children:[Object(P.jsx)(u.a,{value:"",children:Object(P.jsx)("em",{children:"None"})}),t.map((function(n){return Object(P.jsx)(u.a,{value:n,children:n.campaignName})}))]})]}),Object(P.jsxs)(g.a,{variant:"standard",sx:{m:1,minWidth:200},children:[Object(P.jsx)(h.a,{id:"field-nodeflow-label",children:"Nodeflow"}),Object(P.jsxs)(m.a,{labelId:"field-nodeflow-label",id:"field-nodeflow",value:D,onChange:function(n){return k("nodeflow",n)},label:"nodeflow",children:[Object(P.jsx)(u.a,{value:"",children:Object(P.jsx)("em",{children:"None"})}),d.map((function(n){return Object(P.jsx)(u.a,{value:n,children:n.name})}))]})]})]}),Object(P.jsx)("div",{className:"form-action-panel",children:Object(P.jsx)(f.a,{variant:"contained",onClick:function(){var n={id:"".concat(A),campaign:O,branchCode:A,nodeflow:D,dateAdded:(new Date).toISOString()};E(n).then((function(){b("Record Added"),i()})).catch((function(n){v("Error occured while adding record")}))},children:"Save"})})]})]})},T=d.a.div(j||(j=Object(l.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: ",";\n    position: relative;\n\n\n\n    .module-name {\n      position: absolute;\n      top: 0px;\n      left: 0px;\n      width: 100%;\n      padding: 0px 0px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background: ",";\n      h1,h2,h3,h4,h5,h6 {\n        color: #fff;\n        margin: 1rem 0rem;\n      }\n      border-top: 2px solid ",";\n      \n    }\n\n    .form {\n      position: absolute;\n      padding-bottom: 100px;\n       @media only screen and (max-width: 1200px) {\n         padding-top: 64px;\n         padding-bottom: 64px;\n        }\n      display: grid;\n      align-items: center;\n      justify-content: center;\n\n      .form-fields {\n        display: grid;\n        grid-template-columns: 1fr;\n\n         @media only screen and (max-width: 1200px) {\n            grid-template-columns: repeat(3, 250px);\n          }\n        \n        grid-row-gap: 24px;\n      }\n\n      .form-action-panel {\n        position: absolute;\n        bottom: 0px;\n        left: 0px;\n        width: 100%;\n        padding: 24px 0px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n    }\n\n\n\n"])),N.neutral,N.primary,N.secondary),R=i(221),k=i(126),M=i.n(k),B=i(124),F=i.n(B),z=i(231),L=function(n){var e=n.deleteCallback;return Object(P.jsx)(z.a,{color:"secondary","aria-label":"Delete",onClick:e,children:Object(P.jsx)(F.a,{})})},G=function(n){var e=n.refresh,t=n.tableData,i=n.deleteRecord;console.log("TABLE DATA IN EDITOR:",t);var a=t.map((function(n){var e,t;return{id:(null===n||void 0===n?void 0:n.id)||0,dateAdded:null===n||void 0===n?void 0:n.dateAdded,branchCode:null===n||void 0===n?void 0:n.branchCode,campaign:null===n||void 0===n||null===(e=n.campaign)||void 0===e?void 0:e.campaignName,nodeflow:null===n||void 0===n||null===(t=n.nodeflow)||void 0===t?void 0:t.name}})),o=[{field:"dateAdded",headerName:"Date Added",width:"200",align:"center",headerAlign:"center",headerClassName:"table-column-header"},{field:"campaign",headerName:"Campaign",width:"225",align:"center",headerAlign:"center",headerClassName:"table-column-header"},{field:"branchCode",headerName:"Branch Code",width:"150",align:"center",headerAlign:"center",headerClassName:"table-column-header",editable:!1},{field:"nodeflow",headerName:"Nodeflow",width:"225",align:"center",headerAlign:"center",headerClassName:"table-column-header",editable:!1},{field:"actions",headerName:"",width:"50",align:"center",headerAlign:"center",headerClassName:"table-column-header",editable:!1,renderCell:function(n){return Object(P.jsx)(L,{deleteCallback:function(){var e;i(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id)}})}}];return Object(P.jsxs)(J,{children:[Object(P.jsx)("div",{className:"table-container",children:Object(P.jsx)(R.a,{disableSelectionOnClick:!0,rows:a,columns:o,onSelectionModelChange:function(n){console.log(n)},getRowClassName:function(n){return n.indexRelativeToCurrentPage%2===0?"even":"odd"},pageSize:10,rowsPerPageOptions:[10]})}),Object(P.jsx)("div",{className:"action-panel",children:Object(P.jsx)(z.a,{color:"primary","aria-label":"Refresh",onClick:e,children:Object(P.jsx)(M.a,{})})})]})},J=d.a.div(x||(x=Object(l.a)(["\n  display: grid;\n  align-content: center;\n  justify-content: center;\n\n  position: relative;\n\n  .table-container {\n    height: 600px;\n    width: 850px;\n    margin-left: auto;\n    margin-right: auto;\n\n    .MuiDataGrid-columnHeaders {\n      background: ",";\n    }\n    .table-column-header {\n      color: #fff;\n      .MuiDataGrid-columnHeaderTitle {\n        font-weight: 600;\n      }\n    }\n    .even {\n      background: ",";\n    }\n  \n    .odd {\n      background: #fff;\n    }\n\n  }\n\n  .action-panel {\n    position: absolute;\n    bottom: 0px;\n    right: 24px;\n    width: 100%;\n    padding: 24px 0px;\n    display: flex;\n    align-items: flex-end;\n    justify-content: flex-end;\n  }\n\n\n"])),N.primary,N.secondary),W="#141416",U="#0E342C",V="#2F695D",q="#314235",H="#00AB88",K=Object(s.b)(O||(O=Object(l.a)(["\n    body {\n        margin: 0px;\n        padding: 0px;\n    }\n\n"]))),Q=Object(s.b)(y||(y=Object(l.a)(["\n\n    p {\n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 400;\n        font-size: ',";\n        line-height: 156%;\n        letter-spacing: ",";\n    }\n\n    h1 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    h2 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    h3 {\n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    h4 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    h5 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    h6 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    .button1 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 500;\n        font-size: ',";\n        line-height: ",";\n    }\n\n    .button2 { \n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 600;\n        font-size: ',";\n        line-height: ",";\n        text-transform: uppercase;\n    }\n\n\n    .small-text1 {\n        color: ",';\n        font-family: "IBM Plex Sans", sans-serif;\n        font-style: normal;\n        font-weight: 600;\n        font-size: ',";\n        line-height: ",";\n        letter-spacing: ",";\n\n        &.bold {\n            font-weight: 700;\n            font-size: ",";\n            line-height: ",";\n            letter-spacing: ",";\n        }\n\n        &.semibold {\n            font-weight: 600;\n            font-size: ",";\n            line-height: ",";\n            letter-spacing: ",";\n        }\n    }\n\n"])),q,C(14,18,1200,14,1600,18),C(.384712,.5,1200,.384712,1600,.5),W,C(34,44,1200,34,1600,44),C(44,58,1200,44,1600,58),W,C(28,36,1200,28,1600,36),C(44,58,1200,44,1600,58),U,C(22,28,1200,22,1600,28),C(34,44,1200,34,1600,44),U,C(18,24,1200,18,1600,24),C(29,38,1200,29,1600,38),U,C(16,20,1200,16,1600,20),C(26,32,1200,26,1600,32),U,C(14,18,1200,14,1600,18),C(22,28,1200,22,1600,28),V,C(13,16,1200,13,1600,16),C(21,26,1200,21,1600,26),H,C(13,16,1200,13,1600,16),C(21,26,1200,21,1600,26),V,C(13,16,1200,13,1600,16),C(21,26,1200,21,1600,26),C(.5,.5,1200,.5,1600,.5),C(11,14,1200,11,1600,14),C(17.6,22,1200,17.6,1600,22),C(.5,.5,1200,.5,1600,.5),C(11,14,1200,11,1600,14),C(17.6,22,1200,17.6,1600,22),C(.5,.5,1200,.5,1600,.5)),X=function(){return Object(s.b)([K,Q])},Y=function(){var n=Object(a.useState)([]),t=Object(r.a)(n,2),i=t[0],o=t[1],c=Object(a.useState)([]),l=Object(r.a)(c,2),d=l[0],f=l[1],h=function(){new Promise((function(n,t){var i=window.AmeyoClient.init();i.globalData.get("loggedInUser").then((function(a){var o={url:"Administrator"==(null===a||void 0===a?void 0:a.userType)?"ameyorestapi/cc/campaigns/getAllCampaigns":"ameyorestapi/cc/campaigns/getAssigned",headers:{"content-type":"application/json"},method:"GET"};i.httpRequest.invokeAmeyo(o).then((function(i){try{var a=JSON.parse(null===i||void 0===i?void 0:i.response).filter((function(n){return"Interactive Voice Application"==n.campaignType}));n(a)}catch(e){console.log(e),t(e)}})).catch((function(n){console.log("FAILED TO RECEIVE CAMPAIGN LIST"),console.log(n),t(e)}))})).catch((function(n){console.log("FAILED TO RECEIVE LOGGED IN  USER"),console.log(n),t(e)}))})).then((function(n){o(n)})).catch((function(n){v("Error occured while getting campaigns!!!")})),new Promise((function(n,t){I().then((function(i){try{var a=(null===i||void 0===i?void 0:i.data)||"[]";a=JSON.parse(a),n(a)}catch(e){console.log(e),t(e)}})).catch((function(n){console.log(n),t(n)}))})).then((function(n){f(n)})).catch((function(n){v("Error occured while getting TableData!!!")}))};return Object(a.useEffect)((function(){h()}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),Object(P.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:!0}),Object(P.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400;1,600&display=swap",rel:"stylesheet"}),Object(P.jsx)(s.a,{styles:X()}),Object(P.jsxs)(Z,{children:[Object(P.jsx)(D,{campaigns:i,refresh:function(){h()}}),Object(P.jsx)(G,{tableData:d,refresh:function(){h()},deleteRecord:function(n){var t;(t=n,new Promise((function(n,i){I().then((function(a){try{var o=(null===a||void 0===a?void 0:a.data)||"[]",c=JSON.parse(o).filter((function(n){return n.id!=t}));c=JSON.stringify(c);var l=(null===a||void 0===a?void 0:a.id)||-1;S(l,c).then((function(){n()})).catch((function(n){i(n)}))}catch(e){i(e)}}))}))).then((function(){b("Record Deleted"),h()})).catch((function(n){v("Error occured while deletion!!!")}))}})]})]})},Z=d.a.div(w||(w=Object(l.a)(["\n  display: grid;\n  grid-template-columns: 25% auto;\n  grid-row-gap: 48px;\n  grid-column-gap: 12px;\n\n  @media only screen and (max-width: 1200px) {\n    grid-template-columns: 1fr;\n    grid-template-rows: 200px auto;\n  }\n\n  height: 100vh;\n"]))),$=i(127),_=i(227),nn=Object($.a)({palette:{primary:{main:N.primary},secondary:{main:N.highlight1}}}),en=document.getElementById("root");Object(c.createRoot)(en).render(Object(P.jsx)(a.StrictMode,{children:Object(P.jsx)(_.a,{theme:nn,children:Object(P.jsx)(Y,{})})}))}},[[163,1,2]]]);
//# sourceMappingURL=main.5737eb5e.chunk.js.map